import{o as t,c as s,a as o,t as c,z as b,H as G,u as K,r as P,i as n,g as w,e as S,f as R,w as U,F as k,b as A,n as m,d as B,I as W,J as X}from"./index.5979cc9f.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import{u as Z}from"./userStore.f30c64ab.js";import{u as q,_ as ee}from"./Alert.d330a221.js";const te={props:{end_time:{type:Number,required:!0}},data(){return{minute:0,second:0}},mounted(){this.startTimer()},methods:{startTimer(){let p=new Date(this.end_time).getTime(),y=setInterval(()=>{let u=new Date().getTime(),v=p-u,_=Math.floor(v%(1e3*60*60)/(1e3*60)),h=Math.floor(v%(1e3*60)/1e3);this.minute=_,this.second=h,v<0&&clearInterval(y)},1e3)},stopTimer(){clearInterval(this.interval)}}},se={class:"text-2xl btn"};function oe(p,y,u,v,_,h){return t(),s("div",null,[o("div",se,c(_.minute)+" : "+c(_.second),1)])}var re=Q(te,[["render",oe]]);const N=p=>(W("data-v-35874ac1"),p=p(),X(),p),ne={key:0,class:"max-w-md p-5 mx-2 my-10 md:mx-auto"},le={class:"py-3 text-center"},ae={key:0,class:"my-4 text-2xl font-bold text-gray-900 ma-auto"},ie={key:0},ce={key:1,class:"text-center text-gray-900"},de={class:"py-5"},ue=w(" View Solution "),me=["textContent"],_e=["textContent"],be={key:1,class:"container mx-auto"},ve={key:0,class:"pb-10"},he={class:"py-4 text-center"},pe=["innerHTML"],ge=N(()=>o("p",{class:"text-center"}," \u09AA\u09CD\u09B0\u09A4\u09BF\u099F\u09BF \u09AA\u09CD\u09B0\u09B6\u09CD\u09A8\u09C7\u09B0 \u0995\u09CD\u09B7\u09C7\u09A4\u09CD\u09B0\u09C7 \u09A4\u09C1\u09AE\u09BF \u0995\u09C7\u09AC\u09B2 \u098F\u0995\u09AC\u09BE\u09B0 \u0989\u09A4\u09CD\u09A4\u09B0 \u0995\u09B0\u09BE\u09B0 \u09B8\u09C1\u09AF\u09CB\u0997 \u09AA\u09BE\u09AC\u09C7\u0964 \u098F\u0995\u09AC\u09BE\u09B0 \u0989\u09A4\u09CD\u09A4\u09B0 \u09B8\u09BF\u09B2\u09C7\u0995\u09CD\u099F \u0995\u09B0\u09BE\u09B0 \u09AA\u09B0 \u09A4\u09BE \u09AA\u09B0\u09BF\u09AC\u09B0\u09CD\u09A4\u09A8 \u0995\u09B0\u09BE\u09B0 \u0995\u09CB\u09A8\u09CB \u09B8\u09C1\u09AF\u09CB\u0997 \u09A8\u09BE\u0987\u0964 ",-1)),xe={key:0,class:"mx-2 md:w-2/3 md:mx-auto"},ye=["innerHTML"],fe={class:"flex gap-2"},ke={class:"btn btn-sm"},we=N(()=>o("button",{class:"btn btn-sm"},"Marks: "+c(1),-1)),Te={class:"mt-3"},Me=["innerHTML","onClick"],Le=["innerHTML","onClick"],$e=["innerHTML","onClick"],He=["innerHTML","onClick"],Ce={class:"mb-10 text-center"},Se=["disabled"],Ne={key:1,class:"md:w-2/3 md:mx-auto"},Ie=["innerHTML"],De={class:"flex gap-3"},Ee={class:"btn btn-sm"},Oe={key:0,class:"btn btn-sm"},Ae={class:"mt-3"},Be=["innerHTML"],Qe=["innerHTML"],Ve=["innerHTML"],je=["innerHTML"],ze={key:0,class:"my-2 poppins"},Fe=["innerHTML"],Je={class:"material-icons"},Ye={key:0,class:"my-2 text-center"},Ge={key:1,class:"fixed__timer"},Ke={key:2,class:"flex items-center justify-center w-full h-screen"},Pe=N(()=>o("div",{class:"flex items-center justify-center -mt-24 space-x-1 text-sm text-gray-700"},[o("svg",{fill:"none",class:"w-10 h-10 animate-spin",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"clip-rule":"evenodd",d:"M15.165 8.53a.5.5 0 01-.404.58A7 7 0 1023 16a.5.5 0 011 0 8 8 0 11-9.416-7.874.5.5 0 01.58.404z",fill:"currentColor","fill-rule":"evenodd"})]),o("div",{class:"text-lg"},"Loading ...")],-1)),Re=[Pe],Ue={setup(p){const{upcomingAlert:y}=q(),u=b([]),v=b(!0),_=b(!1),h=b(!0),T=b(!1),M=b(Date.now()),I=b(!1),g=b(null),D=G(),x=b(!1),E=l=>{var i=Math.floor(l/6e4),r=(l%6e4/1e3).toFixed(0);return i+":"+(r<10?"0":"")+r},{getExam:V}=K(),a=V();a.is_upcoming&&D.replace("/");let L="https://script.google.com/macros/s/AKfycbyk1GskHMYpHLy4zfDXqDw7UHoHC2VBEpauNKxTpuyvuO1EODEML62_lFkmqYGcOwefyA/exec?sheet="+a.exam.substr(39,44);const j=()=>{x.value=!0,v.value=!0,H.value=Date.now()+a.time*36e3,setTimeout(()=>{$()},a.time*36e3)},f=(l,i)=>{u.value[l].selected=i},{user:z}=Z(),{name:F,ttrx:O,college:J}=z,$=()=>{_.value=!0;let l=u.value.reduce((r,e)=>(e.correct==e.selected&&(r+=1),r),0),i=u.value.map(r=>{let d=[r.a,r.b,r.c,r.d].indexOf(r.selected);return{id:r.id,s:d}}).filter(r=>r.s>-1);x.value?(alert("Retake: "+l),E(Date.now()-M.value),x.value=!1):fetch(L,{method:"POST",mode:"no-cors",cache:"no-cache",redirect:"follow",body:JSON.stringify({roll:O,name:F,attempt:localStorage.getItem(`attempt${a.id}`)||1,score:l,college:J,duration:E(Date.now()-M.value),submission:JSON.stringify(i)})}).then(()=>{alert("Success "+l),localStorage.removeItem(`attempt${a.id}`)}),T.value=!0,v.value=!1,_.value=!1},H=b(null);(()=>{h.value=!0,fetch(L+"&type=check&phone="+O).then(l=>l.json()).then(l=>{fetch(L+"&type=question").then(i=>i.json()).then(i=>{if(u.value=i,l.message=="exists"||a.is_ended)I.value=!0,g.value=l.result?l.result:["","Time's up"],h.value=!1;else{let r=a.time;H.value=Date.now()+r*36e3;let e=localStorage.getItem(`attempt${a.id}`);e?localStorage.setItem(`attempt${a.id}`,Number(e)+1):localStorage.setItem(`attempt${a.id}`,1),M.value=Date.now(),setTimeout(()=>{$()},r*36e3),h.value=!1}})})})();const Y=()=>{D.replace("/ranking/"+a.id)};return(l,i)=>{const r=P("router-link");return t(),s(k,null,[!h.value&&I.value&&!x.value?(t(),s("div",ne,[o("div",le,[g.value[1]?(t(),s("h2",ae,[g.value[1]!=="Time's up"?(t(),s("span",ie,"You Scored:")):n("",!0),w(" "+c(g.value[1]),1)])):n("",!0),g.value[1]=="Time's up"?(t(),s("p",ce,"But you can still give the exam. Click 'Test yourself again'.")):n("",!0),o("div",de,[S(a).is_ended?(t(),R(r,{key:0,to:`/solution/${this.$route.params.id}`,class:"my-2 btn btn-primary"},{default:U(()=>[ue]),_:1},8,["to"])):(t(),s("button",{key:1,class:"btn btn-primary",onClick:i[0]||(i[0]=e=>S(y)("MCQ Solve","Ends")),textContent:c("View Solution")},null,8,me))]),o("div",null,[o("button",{class:"btn btn-primary",onClick:j,textContent:c("Practice Now")},null,8,_e)])])])):!h.value||x.value?(t(),s("div",be,[u.value.length>0?(t(),s("div",ve,[o("div",he,[o("h1",{class:"text-2xl font-bold text-gray-900",innerHTML:S(a).topic},null,8,pe),ge]),T.value?(t(),s("div",Ne,[(t(!0),s(k,null,A(u.value,(e,d)=>(t(),s("div",{key:d,class:"p-5 mx-auto my-3 text-lg bg-white border border-gray-300 rounded-md shadow-lg kalpurush"},[o("div",{class:"inline-flex mb-2 text-lg font-semibold",innerHTML:e.question},null,8,Ie),o("div",De,[o("span",Ee,"Q No. "+c(d+1),1),e.subject?(t(),s("span",Oe,c(e.subject),1)):n("",!0)]),o("div",Ae,[e.a?(t(),s("div",{key:0,innerHTML:e.a,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold text-black  my-3 p-3 rounded   ${e.a==e.selected&&e.selected!=e.correct?"border-2 border-red-500 bg-red-300":" bg-white border"} ${e.a==e.correct?"border-2 border-green-500 ":" bg-white border"}`)},null,10,Be)):n("",!0),e.b?(t(),s("div",{key:1,innerHTML:e.b,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold  my-3 p-3 rounded  ${e.b==e.selected&&e.selected!=e.correct?"border-2 border-red-500 bg-red-300":" bg-white "} ${e.b==e.correct?"border-2 border-green-500 ":" bg-white border"}`)},null,10,Qe)):n("",!0),e.c?(t(),s("div",{key:2,innerHTML:e.c,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold  my-3 p-3 rounded  ${e.c==e.selected&&e.selected!=e.correct?"border-2 border-red-500 bg-red-300":" bg-white "} ${e.c==e.correct?"border-2 border-green-500 ":" bg-white border"}`)},null,10,Ve)):n("",!0),e.d?(t(),s("div",{key:3,innerHTML:e.d,class:m(`cursor-pointer transform hover:scale-105 transition duration-150 hover:font-semibold  my-3 p-3 rounded   ${e.d==e.selected&&e.selected!=e.correct?"border-2 border-red-500 bg-red-300":" bg-white border"} ${e.d==e.correct?"border-2 border-green-500 ":" bg-white "}`)},null,10,je)):n("",!0)]),e.explain?(t(),s("h2",ze,"Explain:")):n("",!0),e.explain?(t(),s("div",{key:1,class:"p-3 my-3 bg-white border border-green-500 rounded",innerHTML:e.explain},null,8,Fe)):n("",!0),o("div",{class:m(["flex gap-2 my-2 text-xl font-semibold",{"text-red-500":e.correct!=e.selected,"text-green-500":e.correct==e.selected}])},[o("span",Je,c(e.correct==e.selected?"done":"close"),1),e.selected?(t(),s(k,{key:0},[w(c(e.correct==e.selected?"Correct":"Wrong"),1)],64)):n("",!0),w(" "+c(e.selected?"":"Not answered"),1)],2)]))),128)),T.value?(t(),s("div",Ye,[o("button",{onClick:Y,class:"btn btn-large bg-primary btn-primary"}," Leaderboard ")])):n("",!0)])):(t(),s("div",xe,[(t(!0),s(k,null,A(u.value,(e,d)=>(t(),s("div",{key:d,class:m(["p-5 mx-auto my-3 text-lg bg-white border border-gray-300 rounded-md shadow-lg kalpurush",{"stop-events":u.value[d].selected}])},[o("div",{class:"mb-2 text-lg font-semibold text-gray-900",innerHTML:e.question},null,8,ye),o("div",fe,[o("button",ke,"Q No: "+c(d+1),1),we]),o("div",Te,[e.a?(t(),s("div",{key:0,innerHTML:e.a,onClick:C=>f(d,e.a),class:m(`cursor-pointer  transform hover:scale-105  transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.a==e.selected?"border-2 border-green-500":" bg-white border "}`)},null,10,Me)):n("",!0),e.b?(t(),s("div",{key:1,innerHTML:e.b,onClick:C=>f(d,e.b),class:m(`cursor-pointer  transform hover:scale-105  transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.b==e.selected?"border-2 border-green-500":" bg-white border "}`)},null,10,Le)):n("",!0),e.c?(t(),s("div",{key:2,innerHTML:e.c,onClick:C=>f(d,e.c),class:m(`cursor-pointer  transform hover:scale-105  transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.c==e.selected?"border-2 border-green-500":" bg-white border "}`)},null,10,$e)):n("",!0),e.d?(t(),s("div",{key:3,innerHTML:e.d,onClick:C=>f(d,e.d),class:m(`cursor-pointer  transform hover:scale-105  transition duration-150 hover:font-semibold text-gray-900  my-3 p-3 rounded  ${e.d==e.selected?"border-2 border-green-500":" bg-white border "}`)},null,10,He)):n("",!0)])],2))),128)),o("div",Ce,[o("button",{onClick:i[1]||(i[1]=e=>$()),disabled:_.value,class:m(["btn btn-success",{loading:_.value}])},c(_.value?"Loading...":"Submit"),11,Se)])]))])):n("",!0),v.value?(t(),s("div",Ge,[B(re,{end_time:H.value},null,8,["end_time"])])):n("",!0)])):(t(),s("div",Ke,Re)),B(ee)],64)}}};var tt=Q(Ue,[["__scopeId","data-v-35874ac1"]]);export{tt as default};
