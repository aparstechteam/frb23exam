import{z as c,H as p,o as d,c as x,a as e,L as h,M as f,n as _,N as v,O as b}from"./index.5979cc9f.js";import{a as g}from"./index.15c82977.js";import{u as y}from"./userStore.f30c64ab.js";const w={class:"container py-20 mx-auto"},S=e("h2",{class:"text-2xl font-bold text-center"},"Request For Access",-1),I=["onSubmit"],N={class:"space-y-2 form-control"},B=e("label",{for:"ttrx",class:""},"Web Access Code",-1),O=e("p",{class:"text-sm"},null,-1),R={class:"text-center"},D={setup(U){const s=c(""),o=c(!1),l=p(),{setUser:u}=y(),m=()=>{o.value=!0;let i="https://shop.aparsclassroom.com/query/";var a=new URLSearchParams;a.append("tran_id",s.value);var r={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a,redirect:"follow"};fetch(i+"transaction",r).then(t=>t.json()).then(t=>{t.status==200&&t.tranx.status=="VALID"&&t.tranx.productName=="FRB23"?(u({name:t.tranx.Name,ttrx:t.tranx.tran_id,college:t.tranx.Institution}),localStorage.setItem("frb23exam",JSON.stringify({name:t.tranx.Name,ttrx:t.tranx.tran_id,college:t.tranx.Institution})),l.push("/")):g.get(`${b}${s.value}`).then(n=>{n.data.status=="success"?l.push("/register?ttrx="+s.value):alert(n.data.message),o.value=!1}).catch(n=>{alert("Something Went Wrong"),o.value=!1})}).catch(t=>alert("Invalid Group Joining ID"))};return(i,a)=>(d(),x("div",w,[S,e("form",{onSubmit:v(m,["prevent"]),class:"max-w-2xl mx-auto space-y-2"},[e("div",N,[B,O,h(e("input",{type:"text",placeholder:"e.g. 3728rtiudwhiwyu898yi","onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),class:"input input-bordered"},null,512),[[f,s.value]])]),e("div",R,[e("button",{type:"submit",class:_(["btn btn-primary",{loading:o.value}])},"Submit",2)])],40,I)]))}};export{D as default};
